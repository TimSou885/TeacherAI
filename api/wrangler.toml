name = "teacherai"
main = "src/index.ts"
compatibility_date = "2026-02-01"

[vars]
SUPABASE_URL = "https://gjeavzfghdjlnmkyenym.supabase.co"

# Secrets (set via: npx wrangler secret put <NAME>)
# SUPABASE_SERVICE_ROLE_KEY
# SUPABASE_JWT_SECRET  (from Supabase Project Settings > API > JWT Secret)
# AZURE_OPENAI_API_KEY
# AZURE_OPENAI_ENDPOINT (e.g. https://xxx.openai.azure.com/)

# Optional for Phase 0 (RAG later)
# [[kv_namespaces]]
# binding = "CACHE"
# id = ""

# RAG：請先執行一次：npx wrangler vectorize create teacherai-embeddings --dimensions=1536 --metric=cosine
# 並設定 secret：npx wrangler secret put ADMIN_EMBED_SECRET
[[vectorize]]
binding = "VECTORIZE"
index_name = "teacherai-embeddings"
